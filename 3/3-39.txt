
(define x 10)

(define s (make-serializer))

(parallel-execute (lambda () (set! x ((s (lambda () (* x x))))))
                  (s (lambda () (set! x (+ x 1)))))


|------------------------------+----+------------------------------+-----+------------------------------+-----|
| step1                        |  x | step2                        |   x | step3                        |   x |
|------------------------------+----+------------------------------+-----+------------------------------+-----|
| (lambda () (* x x))          | 10 | (lambda () (set! x (+ x 1))) |  11 | (set! x ..)                  | 100 |
| (lambda () (* x x))          | 10 | (set! x ..)                  | 100 | (lambda () (set! x (+ x 1))) | 101 |
| (lambda () (set! x (+ x 1))) | 11 | (lambda () (* x x))          |  11 | (set! x ..)                  | 121 |
|------------------------------+----+------------------------------+-----+------------------------------+-----|


追記
11もある
100を計算したあと, 10+1を計算し 100セットして 11セットすると 11になる
